<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cognates</title>
</head>
<body>

<h1>Cognate Searcher</h1>

<h2>Type a word</h2>

<form id="form1">
    <div class="input-group">
        <label for="word">Word: </label>
        <input id ="word" name="word" type="text"/>
        <label for="language">Select Language:</label>
        <select name="lang" id="language"> <option value="english">English</option>
            <option value="spanish">Spanish</option>
        </select>
        <button type="submit" value="search">Submit</button>
    </div>
</form>

<h2>Response: </h2>
<pre id="response"></pre>

<script lang="javascript" type = "text/javascript">

async function handleSubmit(event){
    event.preventDefault();

    const data = new FormData(event.target);
    const word = data.get("word");
    const lang = data.get("lang"); // This will now correctly get "lang"

    try{
        const response = await fetch (`/cognate-check?word=${encodeURIComponent(word)}&lang=${encodeURIComponent(lang)}`)

        if (!response.ok){
            throw new Error(`Server error: ${response.status}`);
        }
        const myJson = await response.json();
        console.log(myJson);
        document.getElementById('response').textContent = JSON.stringify(myJson, undefined, 2);
    } catch (error){
        document.getElementById('response').textContent = `Error: ${error.message}`;
    }


}
document.getElementById("form1").addEventListener("submit", handleSubmit);

</script>

</body>
</html>